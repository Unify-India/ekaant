<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>{{ pageTitle }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="addPayment()" color="success">
        <ion-icon slot="start" name="cash-outline"></ion-icon>
        Add Payment
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">{{ pageTitle }}</ion-title>
    </ion-toolbar>
  </ion-header>
  <div id="content">
    <!-- Stats -->
    <ion-grid class="stats-grid">
      <ion-row>
        @for (s of stats; track $index) {
          <ion-col size="6" sizeLg="3" sizeXl="3">
            <ion-card class="stat-card" [attr.color-name]="s.color">
              <div>
                <ion-icon [name]="s.icon" [color]="s.color"></ion-icon>
                <h3>{{ s.value }}</h3>
              </div>
              <p>{{ s.title }}</p>
              <small>{{ s.sub }}</small>
            </ion-card>
          </ion-col>
        }
      </ion-row>
    </ion-grid>

    <!-- Filters -->
    <div class="filters">
      <ion-segment value="all">
        <ion-segment-button value="all">All Payments</ion-segment-button>
        <ion-segment-button value="paid">Paid</ion-segment-button>
        <ion-segment-button value="pending">Pending</ion-segment-button>
      </ion-segment>

      <ion-searchbar placeholder="Search students, plans..."></ion-searchbar>

      <ion-button fill="solid" color="success">
        <ion-icon name="download-outline"></ion-icon>
        <span class="btn-txt-export"></span>
        Export All
      </ion-button>
    </div>

    <!-- Payments Table -->
    <div class="records-card">
      <h3>Payment Records</h3>
      <p>{{ payments.length }} payments found</p>
      @for (payment of payments; track $index) {
        <div class="record-row" *ngFor="let p of payments">
          <div class="left">
            <h4>{{ p.name }}</h4>
            <small>{{ p.email }}</small>
          </div>

          <div class="plan">
            <strong>{{ p.plan }}</strong>
            <small>{{ p.period }} â€¢ {{ p.details }}</small>
          </div>

          <div class="amount">
            <strong>{{ p.amount }}</strong>
            <small>{{ p.method }}</small>
          </div>

          <div>
            <ion-badge [color]="getStatusColor(p.status)">{{ p.status }}</ion-badge>
          </div>

          <div class="date">{{ p.date }}</div>

          <ion-button size="small" fill="solid" color="primary">
            <ion-icon name="receipt-outline"></ion-icon>
            &nbsp;Invoice
          </ion-button>
        </div>
      }
    </div>

    <!-- Insights -->
    <ion-card class="insights">
      <h4>Revenue Insights</h4>
      <ul>
        <li>Average payment per student: $150</li>
        <li>Monthly recurring revenue: $150</li>
        <li>Payment success rate: 100%</li>
        <li>Total hours purchased: 60 hours</li>
      </ul>
    </ion-card>
  </div>
</ion-content>
